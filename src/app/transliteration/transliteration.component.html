<div class="container-fluid main-bg">
  <!-- navbar -->
  <nav class="bg-white p-3 d-flex align-items-center" [ngClass]="isMobile ? 'justify-content-between' : ''">
    <div class=" d-flex align-items-center" [ngClass]="isMobile ? '' : 'container'">
      <img [attr.height]="isMobile ? '60' : '70'" src="../../assets/logo.png" alt="">
      <h3 class="m-0">TextFusion AI</h3>
    </div>
    <svg (click)="menuOpen = true" *ngIf="isMobile" class="hamburger-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path fill-rule="evenodd" clip-rule="evenodd" d="M3.46447 20.5355C4.92893 22 7.28595 22 12 22C16.714 22 19.0711 22 20.5355 20.5355C22 19.0711 22 16.714 22 12C22 7.28595 22 4.92893 20.5355 3.46447C19.0711 2 16.714 2 12 2C7.28595 2 4.92893 2 3.46447 3.46447C2 4.92893 2 7.28595 2 12C2 16.714 2 19.0711 3.46447 20.5355ZM18.75 16C18.75 16.4142 18.4142 16.75 18 16.75H6C5.58579 16.75 5.25 16.4142 5.25 16C5.25 15.5858 5.58579 15.25 6 15.25H18C18.4142 15.25 18.75 15.5858 18.75 16ZM18 12.75C18.4142 12.75 18.75 12.4142 18.75 12C18.75 11.5858 18.4142 11.25 18 11.25H6C5.58579 11.25 5.25 11.5858 5.25 12C5.25 12.4142 5.58579 12.75 6 12.75H18ZM18.75 8C18.75 8.41421 18.4142 8.75 18 8.75H6C5.58579 8.75 5.25 8.41421 5.25 8C5.25 7.58579 5.58579 7.25 6 7.25H18C18.4142 7.25 18.75 7.58579 18.75 8Z" fill="#5d00ff"></path> </g></svg>

    <div *ngIf="!isMobile">
      <ul class="list m-0 p-0 d-flex">
        <li class="d-flex align-items-center gap-1 tab-item" (click)="isTranscriptionVisible = false"> <svg
            xmlns="http://www.w3.org/2000/svg" width="20" height="20"
            [attr.fill]="isTranscriptionVisible ? 'currentColor' : '#5d00ff'" style="margin-bottom: 3px;">
            <path
              d="M4.5 4a.5.5 0 0 0 0 1h3.6l-2.37 6.16a.5.5 0 1 0 .94.36L7.16 5h1.94L7.7 8.5h2.03a.5.5 0 0 0 0-1H9.36l1.03-2.5h1.61a.5.5 0 0 0 0-1H4.5z" />
            <path
              d="M11.5 10.5a.5.5 0 0 0-.47.31L7.53 19a.5.5 0 1 0 .94.37L10 16h5l1.53 3.69a.5.5 0 0 0 .94-.38l-3.5-8.5a.5.5 0 0 0-.47-.31h-2zM13.38 15H10.6l1.38-3.31L13.38 15z" />
          </svg>
          <span [class.active]="!isTranscriptionVisible">Translation</span>
        </li>
        <li class="d-flex align-items-center gap-1 tab-item" (click)="isTranscriptionVisible = true"> <svg
            xmlns="http://www.w3.org/2000/svg" width="20" height="20"
            [attr.fill]="isTranscriptionVisible ? '#5d00ff' : 'currentColor'" style="margin-bottom: 3px;">
            <path
              d="M5 1a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V6.8L11.2 1H5zm6 6V2.5L16.5 8H12a1 1 0 0 1-1-1z" />
            <path d="M6 11h8v1H6v-1zm0 2h8v1H6v-1zm0-4h5v1H6V9z" />
          </svg>
          <span [class.active]="isTranscriptionVisible">Transcription</span>
        </li>
      </ul>
    </div>
  </nav>
  
  <div class="overlay" *ngIf="menuOpen" (click)="menuOpen = false"></div>
  <!-- mobile menu  -->
  <div *ngIf="isMobile && menuOpen" class="bg-white side-menu">
       <ul class="list m-0 p-0 d-flex flex-column">
        <li class="d-flex align-items-center gap-1 tab-item" (click)="isTranscriptionVisible = false; menuOpen = false"> <svg
            xmlns="http://www.w3.org/2000/svg" width="20" height="20"
            [attr.fill]="isTranscriptionVisible ? 'currentColor' : '#5d00ff'" style="margin-bottom: 3px;">
            <path
              d="M4.5 4a.5.5 0 0 0 0 1h3.6l-2.37 6.16a.5.5 0 1 0 .94.36L7.16 5h1.94L7.7 8.5h2.03a.5.5 0 0 0 0-1H9.36l1.03-2.5h1.61a.5.5 0 0 0 0-1H4.5z" />
            <path
              d="M11.5 10.5a.5.5 0 0 0-.47.31L7.53 19a.5.5 0 1 0 .94.37L10 16h5l1.53 3.69a.5.5 0 0 0 .94-.38l-3.5-8.5a.5.5 0 0 0-.47-.31h-2zM13.38 15H10.6l1.38-3.31L13.38 15z" />
          </svg>
          <span [class.active]="!isTranscriptionVisible">Translation</span>
        </li>
        <li class="d-flex align-items-center gap-1 tab-item" (click)="isTranscriptionVisible = true; menuOpen = false"> <svg
            xmlns="http://www.w3.org/2000/svg" width="20" height="20"
            [attr.fill]="isTranscriptionVisible ? '#5d00ff' : 'currentColor'" style="margin-bottom: 3px;">
            <path
              d="M5 1a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V6.8L11.2 1H5zm6 6V2.5L16.5 8H12a1 1 0 0 1-1-1z" />
            <path d="M6 11h8v1H6v-1zm0 2h8v1H6v-1zm0-4h5v1H6V9z" />
          </svg>
          <span [class.active]="isTranscriptionVisible">Transcription</span>
        </li>
      </ul>
  </div>

  <!-- heading section  -->
  <div class="container mt-5 mb-5">
    <h2 class="text-center" *ngIf="isTranscriptionVisible">Instant Text Transcription</h2>
    <h2 class="text-center" *ngIf="!isTranscriptionVisible">Instant Text Translation</h2>
    <p class="text-center" *ngIf="isTranscriptionVisible">Powered by advance AI. Select a language, type or paste your text, and get <br> accurate
      transcriptions in seconds.</p>
    <p class="text-center" *ngIf="!isTranscriptionVisible"> Powered by advanced AI. Choose your source and target languages, type or paste your text,
      <br>
      and get accurate translations in real time.
    </p>
  </div>

<!-- main section  -->
  <!-- transcription  -->
  <div class="container input-container box-shadow" *ngIf="isTranscriptionVisible">
    <select class="form-select mb-3 w-165 input-bg" [(ngModel)]="language">
      <option value="" disabled selected>üåê Select Language</option>
      <option *ngFor="let lang of languages" [value]="lang.code">
        {{ lang.name }}
      </option>
    </select>

    <div class="input-group">
      <textarea [(ngModel)]="inputText" [class.error]="!language" [disabled]="!language" (input)="onInputChange()"
        placeholder="Type here..." name="input-box" rows="10" class="form-control input-bg"
        aria-label="With textarea"></textarea>
    </div>

    <div class="output mt-3" *ngIf="outputText">
      <p>{{ outputText }}</p>
    </div>
    <!-- 
  <div class="suggestions" *ngIf="suggestions.length">
    <h4>Suggestions:</h4>
    <p *ngFor="let s of suggestions" (click)="useSuggestion(s)">
      {{ s }}
    </p>
  </div> -->


  </div>

  <!-- translation  -->
  <div class="container input-container box-shadow" *ngIf="!isTranscriptionVisible">
    <div class="d-flex justify-content-between">
      <!-- source language -->
      <div class="row mb-3 col-md-6">
        <div class="col-md-6 mb-2">
          <select [(ngModel)]="sourceLang" class="form-select input-bg">
            <option *ngFor="let lang of languages" [value]="lang.code">
              {{ lang.name }}
            </option>
          </select>
        </div>

        <div class="mb-3 pos-rel">
          <!-- <label class="form-label fw-semibold">Enter Text</label> -->
          <textarea [(ngModel)]="text" class="form-control input-bg" rows="8" placeholder="Type here..."></textarea>
          <button class="mic-btn pos-abs b-0" title="speak" (click)="startSpeechToText()"
            [class.listening]="isListening">
            <svg viewBox="-3 0 19 19" xmlns="http://www.w3.org/2000/svg" class="mic-icon">
              <path
                d="M11.665 7.915v1.31a5.257 5.257 0 0 1-1.514 3.694 5.174 5.174 0 0 1-1.641 1.126 5.04 5.04 0 0 1-1.456.384v1.899h2.312a.554.554 0 0 1 0 1.108H3.634a.554.554 0 0 1 0-1.108h2.312v-1.899a5.045 5.045 0 0 1-1.456-.384 5.174 5.174 0 0 1-1.641-1.126 5.257 5.257 0 0 1-1.514-3.695v-1.31a.554.554 0 1 1 1.109 0v1.31a4.131 4.131 0 0 0 1.195 2.917 3.989 3.989 0 0 0 5.722 0 4.133 4.133 0 0 0 1.195-2.917v-1.31a.554.554 0 1 1 1.109 0zM3.77 10.37a2.875 2.875 0 0 1-.233-1.146V4.738A2.905 2.905 0 0 1 3.77 3.58a3 3 0 0 1 1.59-1.59 2.902 2.902 0 0 1 1.158-.233 2.865 2.865 0 0 1 1.152.233 2.977 2.977 0 0 1 1.793 2.748l-.012 4.487a2.958 2.958 0 0 1-.856 2.09 3.025 3.025 0 0 1-.937.634 2.865 2.865 0 0 1-1.152.233 2.905 2.905 0 0 1-1.158-.233A2.957 2.957 0 0 1 3.77 10.37z">
              </path>
            </svg>
          </button>
        </div>
      </div>

      <!-- target language  -->
      <div class="row col-md-6 mb-3">
        <div class="col-md-6 mb-2">
          <select [(ngModel)]="targetLang" class="form-select input-bg">
            <option *ngFor="let lang of languages" [value]="lang.code">
              {{ lang.name }}
            </option>
          </select>
        </div>

        <div class="pos-rel mb-3">
          <!-- <strong>Translated Text:</strong> -->
          <!-- <p class="mt-2 mb-0 fs-5 mb-3">{{ translatedText }}</p> -->
          <textarea [(ngModel)]="translatedText" class="form-control input-bg" rows="8"></textarea>
          <button class="mic-btn pos-abs b-0" title="Listen" (click)="speakTranslatedText()"
            [class.listening]="isListening">
            <svg viewBox="-3 0 19 19" xmlns="http://www.w3.org/2000/svg" class="mic-icon">
              <path
                d="M11.665 7.915v1.31a5.257 5.257 0 0 1-1.514 3.694 5.174 5.174 0 0 1-1.641 1.126 5.04 5.04 0 0 1-1.456.384v1.899h2.312a.554.554 0 0 1 0 1.108H3.634a.554.554 0 0 1 0-1.108h2.312v-1.899a5.045 5.045 0 0 1-1.456-.384 5.174 5.174 0 0 1-1.641-1.126 5.257 5.257 0 0 1-1.514-3.695v-1.31a.554.554 0 1 1 1.109 0v1.31a4.131 4.131 0 0 0 1.195 2.917 3.989 3.989 0 0 0 5.722 0 4.133 4.133 0 0 0 1.195-2.917v-1.31a.554.554 0 1 1 1.109 0zM3.77 10.37a2.875 2.875 0 0 1-.233-1.146V4.738A2.905 2.905 0 0 1 3.77 3.58a3 3 0 0 1 1.59-1.59 2.902 2.902 0 0 1 1.158-.233 2.865 2.865 0 0 1 1.152.233 2.977 2.977 0 0 1 1.793 2.748l-.012 4.487a2.958 2.958 0 0 1-.856 2.09 3.025 3.025 0 0 1-.937.634 2.865 2.865 0 0 1-1.152.233 2.905 2.905 0 0 1-1.158-.233A2.957 2.957 0 0 1 3.77 10.37z">
              </path>
            </svg>
          </button>
        </div>
      </div>
    </div>

    <!-- translate button -->
    <div class="d-grid mb-3">
      <button (click)="translate()" class="btn btn-primary" [disabled]="loading">
        <span *ngIf="!loading">Translate</span>
        <span *ngIf="loading">
          <span class="spinner-border spinner-border-sm"></span> Translating...
        </span>
      </button>
    </div>
  </div>
</div>